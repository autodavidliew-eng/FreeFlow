# Validation S6.1 â€” NGSI-LD Consumer

## Start consumer

```bash
pnpm --filter @freeflow/db-postgres db:deploy
pnpm --filter @freeflow/db-postgres db:generate
pnpm --filter @freeflow/ngsi-consumer dev
```

## Send test notification

```bash
curl -X POST http://localhost:8092/notify/ngsi-ld \
  -H "Content-Type: application/json" \
  -H "NGSILD-Tenant: alpha" \
  -d '{"data":[{"id":"urn:ngsi-ld:SmartMeterMeasurement:alpha:emeter-001:2026-02-16T00:00:00Z","type":"SmartMeterMeasurement","meter":{"type":"Relationship","object":"urn:ngsi-ld:SmartMeter:alpha:emeter-001"},"powerW":{"type":"Property","value":1234.5,"observedAt":"2026-02-16T00:00:00Z"},"energyKWh":{"type":"Property","value":0.1028,"observedAt":"2026-02-16T00:00:00Z"},"timestamp":{"type":"Property","value":"2026-02-16T00:00:00Z"}}]}'
```

## Verify row in Postgres

```bash
cd infra/compose
sudo docker compose exec postgres psql -U freeflow -d freeflow -c "select tenant, \"meterId\", ts, \"powerW\", \"energyKWh\" from \"SmartMeterMeasurement\" order by ts desc limit 1;"
```
